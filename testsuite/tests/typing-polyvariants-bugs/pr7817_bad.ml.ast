[
  structure_item (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[5,24+0]..[5,24+16])
    Pstr_value Nonrec
    [
      <def>
        pattern (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[5,24+4]..[5,24+5])
          Ppat_var "r" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[5,24+4]..[5,24+5])
        expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[5,24+8]..[5,24+16])
          Pexp_apply
          expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[5,24+8]..[5,24+11])
            Pexp_ident "ref" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[5,24+8]..[5,24+11])
          [
            <arg>
            Nolabel
              expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[5,24+12]..[5,24+16])
                Pexp_construct "None" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[5,24+12]..[5,24+16])
                None
          ]
    ]
  structure_item (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[7,42+0]..[12,184+3])
    Pstr_module
    "M" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[7,42+7]..[7,42+8])
      module_expr (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[7,42+9]..[12,184+3])
        Pmod_constraint
        module_expr (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[9,111+6]..[12,184+3])
          Pmod_structure
          [
            structure_item (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[10,124+2]..[11,140+43])
              Pstr_value Nonrec
              [
                <def>
                  pattern (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[10,124+6]..[10,124+11])
                    Ppat_var "write" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[10,124+6]..[10,124+11])
                  expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[10,124+12]..[11,140+43]) ghost
                    Pexp_fun
                    Nolabel
                    None
                    pattern (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[10,124+12]..[10,124+13])
                      Ppat_var "x" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[10,124+12]..[10,124+13])
                    expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+4]..[11,140+43])
                      Pexp_match
                      expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+10]..[11,140+11])
                        Pexp_ident "x" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+10]..[11,140+11])
                      [
                        <case>
                          pattern (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+17]..[11,140+28])
                            Ppat_or
                            pattern (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+17]..[11,140+21])
                              Ppat_variant "A"
                              Some
                                pattern (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+20]..[11,140+21])
                                  Ppat_any
                            pattern (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+24]..[11,140+28])
                              Ppat_variant "B"
                              Some
                                pattern (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+27]..[11,140+28])
                                  Ppat_any
                          expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+32]..[11,140+43])
                            Pexp_apply
                            expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+34]..[11,140+36])
                              Pexp_ident ":=" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+34]..[11,140+36])
                            [
                              <arg>
                              Nolabel
                                expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+32]..[11,140+33])
                                  Pexp_ident "r" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+32]..[11,140+33])
                              <arg>
                              Nolabel
                                expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+37]..[11,140+43])
                                  Pexp_construct "Some" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+37]..[11,140+41])
                                  Some
                                    expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+42]..[11,140+43])
                                      Pexp_ident "x" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[11,140+42]..[11,140+43])
                            ]
                      ]
              ]
          ]
        module_type (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[7,42+11]..[9,111+3])
          Pmty_signature
          [
            signature_item (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+2]..[8,57+53])
              Psig_value
              value_description "write" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+6]..[8,57+11]) (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+2]..[8,57+53])
                core_type (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+15]..[8,57+52])
                  Ptyp_arrow
                  Nolabel
                  core_type (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+15]..[8,57+44])
                    Ptyp_variant closed=Closed
                    [
                      Rtag "A" false
                        [
                          core_type (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+24]..[8,57+30])
                            Ptyp_constr "string" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+24]..[8,57+30])
                            []
                        ]
                      Rtag "B" false
                        [
                          core_type (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+39]..[8,57+42])
                            Ptyp_constr "int" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+39]..[8,57+42])
                            []
                        ]
                    ]
                    Some
                      []
                  core_type (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+48]..[8,57+52])
                    Ptyp_constr "unit" (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[8,57+48]..[8,57+52])
                    []
                []
          ]
  structure_item (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[13,188+0]..[34,1054+3])
    Pstr_extension "expect"
    [
      structure_item (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[13,188+9]..[34,1054+2])
        Pstr_eval
        expression (testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[13,188+9]..[34,1054+2])
          Pexp_constant PConst_string ("\nval r : '_weak1 option ref = {contents = None}\nLines 5-8, characters 6-3:\n5 | ......struct\n6 |   let write x =\n7 |     match x with `A _ | `B _ -> r := Some x\n8 | end\nError: Signature mismatch:\n       Modules do not match:\n         sig val write : _[< `A of '_weak2 | `B of '_weak3 ] -> unit end\n       is not included in\n         sig val write : [< `A of string | `B of int ] -> unit end\n       Values do not match:\n         val write : _[< `A of '_weak2 | `B of '_weak3 ] -> unit\n       is not included in\n         val write : [< `A of string | `B of int ] -> unit\n       The type (_[< `A of '_weak2 | `B of '_weak3 ] as 'a) -> unit\n       is not compatible with the type\n         ([< `A of string | `B of int ] as 'b) -> unit\n       Type _[< `A of '_weak2 | `B of '_weak3 ] as 'a\n       is not compatible with type [< `A of string | `B of int ] as 'b\n",(testsuite/tests/typing-polyvariants-bugs/pr7817_bad.ml[13,188+11]..[34,1054+0]),Some "")
    ]
]

